<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Principal</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">

    <link rel="stylesheet" href="./container.css">
</head>
<body>

    <div id="topBar" class="container-fluid">
      HEADER
    </div>

    <div id="containerPrincipal" class="container-fluid">
      <div class="row">

        <div id="containerControleExibicao">
          <button id="btnEsconde" class="btn btn-primary btn-sm"><i class="btnControleExibicao bi bi-arrow-bar-left"></i></button>
          <button id="btnMostra" class="btn btn-primary btn-sm"><i class="btnControleExibicao bi bi-arrow-bar-right"></i></button>            
        </div>

        <div id="aside" class="col-md-2">
          <a href="#">
            <div class="menuItem">
              Dashboard
            </div>
          </a>
          <a href="#">
            <div class="menuItem">
              Receita
            </div>
          </a>
          <a href="#">
            <div class="menuItem">
              Dívidas
            </div>
          </a>
          <a href="#">
            <div class="menuItem">
              Decisório
            </div>
          </a>
        </div>
        
        <div id="containerTabela" class="col-md-10">
          <div id="principalAcoes" class="row">
            
            <div class="col-md-1 col-3">
              <button id="add" onclick="mostraModalAddDivida()" class="btn btn-success btn-sm" title="Adicionar"><i class="bi bi-plus-circle"></i></button>
            </div>
            
            <div id="escolhaPeriodo" class="col-md-1 col-3">
              <label class="form-label" title="Escolha o Período">Período</label>
            </div>

            <div class="col-md-2 col-3">
              <select id="selecionaMes" class="form-select" onchange="filtraDividas()">
                <option value="1">Janeiro</option>
                <option value="2">Fevereiro</option>
                <option value="3">Março</option>
                <option value="4">Abril</option>
                <option value="5">Maio</option>
                <option value="6">Junho</option>
                <option value="7">Setembro</option>
                <option value="8">Agosto</option>
                <option value="9">Setembro</option>
                <option value="10">Outubro</option>
                <option value="11">Novembro</option>
                <option value="12">Dezembro</option>
              </select>
            </div>

            <div class="col-md-2 col-3">
              <select id="selecionaAno" class="form-select" onchange="filtraDividas()">
              </select>
            </div>

          </div>
          
          <div id="principal" data-spy="scroll">
            <table class="table table-striped table-bordered">
              <thead class="thead-dark align-center">
                <tr>
                  <!-- <th scope="col" class="center">id</th> -->
                  <th scope="col">Descrição</th>
                  <th scope="col">Beneficiário</th>
                  <th scope="col">DT Emissão</th>
                  <th scope="col">DT Vencimento</th>
                  <th scope="col">DT Pagamento</th>
                  <th scope="col">Valor Pago</th>
                  <th scope="col">Valor a Pagar</th>
                  <th scope="col">QTD Parcela</th>
                  <th scope="col">Pago</th>
                  <th scope="col">Recibo</th>
                  <th scope="col">Ação</th>
                </tr>
              </thead>
              <tbody id="corpoTabela" class="text-center">
              </tbody>
            </table>
          </div>
          
        </div>

      </div>
    </div>

    <div id="footer" class="">
      <div class="container-fluid">
        <div id="footerResume" class="row">
          
          <div class="col-md-3">
            <label><b>Capital:</b> R$
              <span id="footerCapital" type="text" value="0" disabled>0</span>
            </label>
          </div>

          <div class="col-md-3">
            <label><b>Resto:</b> R$
              <span id="footerResto" type="text" value="0" disabled>0</span>
            </label>
          </div>

          <div class="col-md-3">
            <label><b>Pago:</b> R$
              <span id="footerPago" type="text" value="0" disabled>0</span>
            </label>
          </div>
          
          <div class="col-md-3">
            <label><b>Total:</b> R$
              <span id="footerTotal" type="text" value="0" disabled>0</span>
            </label>
          </div>
          
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.8.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.8.1/firebase-database.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>

    <script src="./loading/loading.js"></script>
    <script src="../../firebase.js"></script>
    <script src="./content.js"></script>

    <script type="module">
        let mesAtual = new Date().getMonth() + 1
        let anoAtual = new Date().getFullYear()
        $("#selecionaMes").val(mesAtual)
        $("#selecionaAno").val(anoAtual)
        carregaDividas(mesAtual, anoAtual)
    </script>

    <!-- MODAL ADD DIVIDA -->
    <div id="modalAddDivida" class="modal" tabindex="-1">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Adicionar dívida</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                
                <form>
                    <div class="mb-3">
                      <label for="inptBeneficiario" class="form-label">Beneficiário</label>
                      <input type="text" class="form-control required" id="inptBeneficiario" required="required">
                    </div>
                   
                    <div class="mb-3 row">
                      <div class="col-md-4">
                        <label for="inptDataEmissao" class="form-label">Data Emissão</label>
                        <input type="date" class="form-control" id="inptDataEmissao">
                      </div>

                      <div class="col-md-4">
                        <label for="inptDataPagamento" class="form-label">Data Pagamento</label>
                        <input type="date" class="form-control" id="inptDataPagamento">
                      </div>
                        
                      <div class="col-md-4">
                        <label for="inptDataVencimento" class="form-label">Data Vencimento</label>
                        <input type="date" class="form-control" id="inptDataVencimento">
                      </div>
                    </div>

                    <div class="mb-3">
                      <label for="inptDescricao" class="form-label">Descrição</label>
                      <input type="text" class="form-control" id="inptDescricao">
                    </div>

                    <div class="mb-3 row">
                      <div class="col-md-3">
                        <label for="inptPago" class="form-label">Pago</label>
                        <div class="input-group">
                          <div class="input-group-prepend">
                            <div class="input-group-text">
                              <input type="checkbox" class="" id="inptPago">
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="col-md-3">
                        <label for="inptTipoDivida" class="form-label">Tipo de Dívida</label>
                        <select name="" id="inptTipoDivida" class="form-select" required onchange="qtdParcelasAdd()">
                          <option value="servico">Serviço</option>
                          <option value="prestacao">Pretação</option>
                          <option value="avista" selected>Á vista</option>
                        </select>
                      </div>

                      <div id="containerQtdParcelas" class="col-md-3">
                        <label for="inptQuantidadeParcelas" class="form-label">QTD Parcelas</label>
                        <input type="number" class="form-control" id="inptQuantidadeParcelas">
                      </div>

                      <div class="col-md-3">
                        <label for="inptValorAPagar" class="form-label">Valor A Pagar</label>
                        <input type="number" class="form-control" id="inptValorAPagar">
                      </div>

                      <div class="col-md-3">
                        <div class="mb-3">
                          <label for="inptValor" class="form-label">Valor</label>
                          <input type="number" class="form-control" id="inptValor">
                        </div>
                      </div>
                    </div>

                    <button type="button" id="btnSalvarDivida" class="btn btn-primary" onclick="salvarDivida()">Salvar</button>
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button>
                </form>

            </div>
          </div>
        </div>
    </div>

    <!-- MODAL EDIT DIVIDA -->
    <div id="modalEditDivida" class="modal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Editar dívida</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
              
              <form>
                  <input id="idDivida" type="hidden" value="">
                  <div class="mb-3">
                    <label for="inptEditBeneficiario" class="form-label">Beneficiário</label>
                    <input type="text" class="form-control required" id="inptEditBeneficiario" required="required">
                  </div>
                 
                  <div class="mb-3 row">
                    <div class="col-md-4">
                      <label for="inptEditDataEmissao" class="form-label">Data Emissão</label>
                      <input type="date" class="form-control" id="inptEditDataEmissao">
                    </div>

                    <div class="col-md-4">
                      <label for="inptEditDataPagamento" class="form-label">Data Pagamento</label>
                      <input type="date" class="form-control" id="inptEditDataPagamento">
                    </div>
                      
                    <div class="col-md-4">
                      <label for="inptEditDataVencimento" class="form-label">Data Vencimento</label>
                      <input type="date" class="form-control" id="inptEditDataVencimento">
                    </div>
                  </div>

                  <div class="mb-3">
                    <label for="inptEditDescricao" class="form-label">Descrição</label>
                    <input type="text" class="form-control" id="inptEditDescricao">
                  </div>

                  <div class="mb-3 row">
                    <div class="col-md-3">
                      <label for="inptEditPago" class="form-label">Pago</label>
                      <div class="input-group">
                        <div class="input-group-prepend">
                          <div class="input-group-text">
                            <input type="checkbox" class="" id="inptEditPago">
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="col-md-3">
                      <label for="inptEditTipoDivida" class="form-label">Tipo de Dívida</label>
                      <select name="" id="inptEditTipoDivida" class="form-select" required onchange="qtdParcelasEdit()">
                        <option value="servico">Serviço</option>
                        <option value="prestacao">Pretação</option>
                        <option value="avista" selected>Á vista</option>
                      </select>
                    </div>

                    <div id="containerQtdParcelasEdit" class="col-md-3">
                      <label for="inptEditQuantidadeParcelas" class="form-label">QTD Parcelas</label>
                      <input type="number" class="form-control" id="inptEditQuantidadeParcelas">
                    </div>

                    <div class="col-md-3">
                      <label for="inptEditValorAPagar" class="form-label">Valor A Pagar</label>
                      <input type="number" class="form-control" id="inptEditValorAPagar">
                    </div>

                    <div class="col-md-3">
                      <div class="mb-3">
                        <label for="inptEditValor" class="form-label">Valor</label>
                        <input type="number" class="form-control" id="inptEditValor">
                      </div>
                    </div>
                  </div>


                  <button type="button" id="" class="btn btn-primary" onclick="updateDivida()">Salvar</button>
                  <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button>
              </form>

          </div>
        </div>
      </div>
  </div>

</body>
</html>